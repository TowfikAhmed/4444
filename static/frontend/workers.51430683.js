import{_ as g}from"./over.8db6aea3.js";import{u as k}from"./useApi.1e322299.js";import{i as _,o as l,l as n,v as e,u as o,F as E,x as L,y as h,z as p,A as x,t as d,B as C,C as f,E as w}from"./entry.9c3217d9.js";import{j as F,v as A,K as W}from"./transition.dc1728f7.js";const j={class:"p-6 w-4/5"},V={class:"bg-white py-6"},P={class:"flex items-center justify-between pb-8"},U=e("h3",{class:"text-2xl font-bold text-slate-700 my-4"},"Workers List",-1),B={class:"container mx-auto"},$={class:"-mx-4 flex flex-wrap"},N={class:"w-full px-4"},D={key:0,class:"max-w-full overflow-x-auto"},K={class:"w-full table-auto"},M=e("thead",null,[e("tr",{class:"bg-primary text-center"},[e("th",{class:"w-1/6 min-w-[160px] border-l border-transparent py-3 px-3 text-lg font-semibold text-white"},"Username"),e("th",{class:"w-1/6 min-w-[160px] py-3 px-3 text-lg font-semibold text-white"},"Pending"),e("th",{class:"w-1/6 min-w-[160px] py-3 px-3 text-lg font-semibold text-white"},"Earning"),e("th",{class:"w-1/6 min-w-[160px] py-3 px-3 text-lg font-semibold text-white"},"Joined On"),e("th",{class:"w-1/6 min-w-[160px] py-3 px-3 text-lg font-semibold text-white"},"Action")])],-1),O={class:"text-dark border-b border-l border-[#E8E8E8] bg-[#F3F6FF] py-5 px-2 text-center text-base font-medium"},T={class:"text-dark border-b border-[#E8E8E8] bg-white py-5 px-2 text-center text-base font-medium"},q={class:"text-dark border-b border-[#E8E8E8] bg-white py-5 px-2 text-center text-base font-medium"},z={class:"text-dark border-b border-[#E8E8E8] bg-white py-5 px-2 text-center text-base font-medium"},J={class:"text-dark border-b border-[#E8E8E8] bg-[#F3F6FF] px-2 text-center text-base font-medium"},S=["onClick"],Z=e("span",{class:"sr-only"},"Close panel",-1),G=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M20 6.91L17.09 4L12 9.09L6.91 4L4 6.91L9.09 12L4 17.09L6.91 20L12 14.91L17.09 20L20 17.09L14.91 12L20 6.91Z"})],-1),H=[Z,G],I={class:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl"},Q={class:"px-4 sm:px-6"},R={class:"relative mt-6 flex-1 px-4 sm:px-6"},X={class:"my-4"},Y={class:"w-full mt-4"},ee=e("label",{class:"text-xs text-gray-600"},"Username",-1),te={class:"w-full mt-4"},se=e("label",{class:"text-xs text-gray-600"},"Password",-1),oe={class:"w-full mt-4"},re=e("label",{class:"text-xs text-gray-600"},"Password",-1),ae={key:0,class:"my-4 text-rose-600"},xe={__name:"workers",setup(le){const u=k(),i=_("ss"),m=async()=>{const a=await u.get("/api/dash/profiles");i.value=a.data};m();const b=async a=>{const r=await u.del("/api/dash/profiles/"+a+"/delete");console.log(r),m()},c=_(!1),t=_({username:"",password:"",confirm_password:"",error:""}),v=async()=>{if(t.value.error="",!t.value.username||!t.value.password||!t.value.confirm_password){t.value.error="All fields are required";return}if(t.value.password!=t.value.confirm_password){t.value.error="Password does not match";return}const a=await u.post("/api/dash/profiles/create",t.value);console.log(a),m(),c.value=!1};return(a,r)=>{const y=g;return l(),n("section",j,[e("section",V,[e("div",P,[U,e("a",{onClick:r[0]||(r[0]=s=>c.value=!0),class:"bg-primary cursor-pointer inline-flex items-center h-[50px] justify-center rounded px-6 text-center font-normal text-white hover:bg-opacity-90"}," + Add Worker ")]),e("div",B,[e("div",$,[e("div",N,[o(i)&&o(i).results?(l(),n("div",D,[e("table",K,[M,e("tbody",null,[(l(!0),n(E,null,L(o(i).results,s=>(l(),n("tr",{key:s.id},[e("td",O,d(s.user.username),1),e("td",T,d(s.pending),1),e("td",q,d(s.earning),1),e("td",z,d(s.user.date_joined),1),e("td",J,[e("a",{onClick:ne=>b(s.id),class:"bg-primary cursor-pointer inline-flex items-center h-[50px] justify-center rounded px-6 text-center font-normal text-white hover:bg-opacity-90"},"Delete",8,S)])]))),128))])])])):h("",!0)])])])]),p(y,{show:o(c)},{default:x(()=>[p(o(F),{class:"pointer-events-auto relative w-screen max-w-md"},{default:x(()=>[p(o(A),{as:"template",enter:"ease-in-out duration-500","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-500","leave-from":"opacity-100","leave-to":"opacity-0"},{default:x(()=>[e("div",{onClick:r[2]||(r[2]=s=>c.value=!1),class:"absolute top-0 -left-2 flex pt-4 pr-2 sm:-ml-10 sm:pr-4"},[e("span",{type:"button",class:"rounded-full text-slate-600 shadow-xl bg-white hover:text-slate-500 cursor-pointer p-1",onClick:r[1]||(r[1]=s=>a.open=!1)},H)])]),_:1}),e("div",I,[e("div",Q,[p(o(W),{class:"text-base font-semibold leading-6 text-gray-900"},{default:x(()=>[C("Add Worker")]),_:1})]),e("div",R,[e("div",X,[e("div",Y,[ee,f(e("input",{"onUpdate:modelValue":r[3]||(r[3]=s=>o(t).username=s),type:"text",class:"w-full border border-gray-200 p-2 rounded mt-1",placeholder:"Username"},null,512),[[w,o(t).username]])]),e("div",te,[se,f(e("input",{"onUpdate:modelValue":r[4]||(r[4]=s=>o(t).password=s),type:"password",class:"w-full border border-gray-200 p-2 rounded mt-1",placeholder:"Password"},null,512),[[w,o(t).password]])]),e("div",oe,[re,f(e("input",{"onUpdate:modelValue":r[5]||(r[5]=s=>o(t).confirm_password=s),type:"password",class:"w-full border border-gray-200 p-2 rounded mt-1",placeholder:"Password"},null,512),[[w,o(t).confirm_password]])]),o(t).error?(l(),n("p",ae,d(o(t).error),1)):h("",!0),e("div",{class:"w-full mt-4"},[e("button",{onClick:v,class:"bg-primary inline-flex items-center h-[50px] justify-center rounded px-6 text-center font-normal text-white hover:bg-opacity-90"},"Add Worker")])])])])]),_:1})]),_:1},8,["show"])])}}};export{xe as default};
